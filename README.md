# sdl3-deno

Deno FFI bindings for SDL3 libraries with safe wrappers.

## Overview

`sdl3-deno` provides Deno FFI (Foreign Function Interface) bindings for SDL3 libraries, along with safe TypeScript wrappers.

## Warning: Early Stage Development

This library is in early development and may contain bugs or missing features. The API is subject to change in future releases. Please report any issues you encounter.

## Features

- Full FFI bindings with original doc comment
- Type-safe TypeScript wrappers
- Cross-platform support (Windows, macOS, Linux)
- Memory safety guarantees
- Simple, Deno-style API

## Installation

1. `deno add jsr:@sdl3/sdl3-deno` or Clone the repository
2. Install [SDL3 runtime libraries](https://github.com/libsdl-org/SDL/releases) and set the `DENO_SDL3_PATH` environment variable (or install them into the `./sdl3` directory) [`gen/_util.ts`]

It's recommended to use an environment file: https://docs.deno.com/runtime/reference/env_variables/

```.env
DENO_SDL3_PATH=/path/to/sdl3
```

3. Import modules as needed


```typescript

// FFI
import { SDL } from "@sdl3/sdl3-deno/SDL";
import { IMG } from "@sdl3/sdl3-deno/IMG";
import { TTF } from "@sdl3/sdl3-deno/TTF";

// Safe wrappers
import { Tray } from "@sdl3/sdl3-deno/tray";
import * as Dialog from "@sdl3/sdl3-deno/dialog";
import * as MessageBox from "@sdl3/sdl3-deno/messagebox";

// some modules are not yet published - you can use them directly from source by cloning the repository
import * as structs from './gen/structs/mod.ts';

```

## Basic Usage

```typescript
import { Tray } from "@sdl3/sdl3-deno/tray";
import { SDL } from "@sdl3/sdl3-deno/SDL";

if (!SDL.init(SDL.INIT.VIDEO | SDL.INIT.EVENTS)) {
  throw new Error("SDL init video and events failed");
}
// call SDL.pollEvents if you need handle events
const pumpInterval = setInterval(SDL.pumpEvents, 1000 / 60);

const tray = new Tray({
  icon: "./examples/search.svg",
  tooltip: "a tooltip",
  menu: [
    {
      label: "a label",
      action: () => {
        console.log("Tray entry clicked!");
      },
    },
    {
      label: "Quit",
      flag: "button",
      action: () => {
        console.log("quit");
        tray.destroy();
        clearInterval(pumpInterval);
        SDL.quit();
      },
    },
  ],
});

```

## API Documentation

### FFI bindings
The FFI bindings can be found at the `./gen` directory.

These bindings are generated by scripts, with most functions and enums exported to the main module. Some definitions may be platform-dependent and could be ignored due to generation errors .

### Safe wrappers
- `@sdl3/sdl3-deno/tray` This allows Deno applications to interact with native system tray features in a cross-platform way
- `@sdl3/sdl3-deno/messagebox`  a simple message box API, which is useful for simple alerts or choices
- `@sdl3/sdl3-deno/dialog` file dialogs, to let users select files with native GUI interfaces

## Requirements

- Deno 1.25+
- SDL3 runtime libraries installed


## Building from Source

1. Clone the repository
2. Run `deno run -A examples/tray.ts`


## Credits Or inspiration

- SDL3 Development Team - https://github.com/libsdl-org/SDL
- Deno FFI contributors - https://docs.deno.com/runtime/reference/deno_namespace_apis/
- [littledivy/deno_sdl2](https://github.com/littledivy/deno_sdl2) SDL2 Deno bindings inspiration
- [smack0007/SDL_ts](https://github.com/smack0007/SDL_ts) Similar project for SDL2
- [maia-s/sdl3-sys-rs](https://github.com/maia-s/sdl3-sys-rs) A Rust crate for SDL3 bindings


## Contributing

Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.

## License

MIT
